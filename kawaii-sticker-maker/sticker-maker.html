<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kawaii Sticker Maker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap CSS -->
  <!-- <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  /> -->
  <link rel="stylesheet" href="../assets/bootstrap.5.3.3.min.css">

  <style>
    body {
      background: linear-gradient(180deg, #ffe6f0, #f5e9ff);
      font-family: "Segoe UI", sans-serif;
    }

    .card {
      border-radius: 20px;
    }

    #preview {
      width: 400px;
      height: 400px;
      background: transparent;
    }

    svg {
      width: 100%;
      height: 100%;
    }

    .btn-soft {
      border-radius: 20px;
    }

    .color-input {
      height: 38px;
    }
  </style>
</head>

<body>
<div class="container py-4">
  <div class="row g-4">

    <!-- Controls -->
    <div class="col-md-4">
      <div class="card p-3 shadow-sm">
        <h5 class="mb-3">ðŸŽ€ Kawaii Controls</h5>

        <label class="form-label">Base Color</label>
        <input type="color" id="baseColor" class="form-control form-control-color color-input" value="#FFD6E0" />

        <label class="form-label mt-2">Face Color</label>
        <input type="color" id="faceColor" class="form-control form-control-color color-input" value="#FFFFFF" />

        <label class="form-label mt-3">Eyes</label>
        <div class="d-flex gap-2">
          <button class="btn btn-outline-primary btn-sm" onclick="setEyes('round')">Round</button>
          <button class="btn btn-outline-primary btn-sm" onclick="setEyes('sparkle')">Sparkle</button>
        </div>

        <label class="form-label mt-3">Mouth</label>
        <div class="d-flex gap-2">
          <button class="btn btn-outline-secondary btn-sm" onclick="setMouth('smile')">Smile</button>
          <button class="btn btn-outline-secondary btn-sm" onclick="setMouth('o')">O</button>
          <button class="btn btn-outline-secondary btn-sm" onclick="setMouth('flat')">Flat</button>
        </div>

        <div class="form-check mt-3">
          <input class="form-check-input" type="checkbox" id="blush" checked onchange="toggleBlush()" />
          <label class="form-check-label">Blush</label>
        </div>

        <label class="form-label mt-3">Text</label>
        <input type="text" class="form-control" placeholder="Yay!" oninput="updateText(this.value)" />

        <div class="mt-3 d-grid gap-2">
          <button class="btn btn-success btn-soft" onclick="downloadPNG()">â¬‡ Download PNG</button>
          <button class="btn btn-outline-danger btn-soft" onclick="resetSticker()">Reset</button>
        </div>
      </div>
    </div>

    <!-- Preview -->
    <div class="col-md-8 d-flex justify-content-center align-items-center">
      <div class="card p-4 shadow-lg">
        <div id="preview">
          <svg id="sticker" viewBox="0 0 100 100">
            <!-- Border -->
            <path
              id="border"
              d="M50 3C75 3 97 25 97 50C97 75 75 97 50 97C25 97 3 75 3 50C3 25 25 3 50 3Z"
              fill="#FFD6E0"
              stroke="#fff"
              stroke-width="4"
            />

            <!-- Face -->
            <ellipse id="face" cx="50" cy="52" rx="30" ry="28" fill="#fff" />

            <!-- Eyes -->
            <g id="eyes">
              <circle cx="40" cy="50" r="6" />
              <circle cx="60" cy="50" r="6" />
            </g>

            <!-- Mouth -->
            <path
              id="mouth"
              d="M38 64 Q50 72 62 64"
              stroke="#111"
              stroke-width="3"
              fill="none"
              stroke-linecap="round"
            />

            <!-- Blush -->
            <g id="blushGroup">
              <ellipse cx="32" cy="62" rx="5" ry="3" fill="#FFB3C6" />
              <ellipse cx="68" cy="62" rx="5" ry="3" fill="#FFB3C6" />
            </g>

            <!-- Text -->
            <text
              id="stickerText"
              x="50"
              y="90"
              text-anchor="middle"
              font-size="8"
              fill="#444"
            ></text>
          </svg>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- JS -->
<script>
  const baseColor = document.getElementById("baseColor");
  const faceColor = document.getElementById("faceColor");
  const border = document.getElementById("border");
  const face = document.getElementById("face");
  const eyes = document.getElementById("eyes");
  const mouth = document.getElementById("mouth");
  const blushGroup = document.getElementById("blushGroup");
  const stickerText = document.getElementById("stickerText");

  baseColor.oninput = () => (border.style.fill = baseColor.value);
  faceColor.oninput = () => (face.style.fill = faceColor.value);

  function setEyes(type) {
    eyes.innerHTML = "";
    if (type === "sparkle") {
      eyes.innerHTML = `
        <ellipse cx="40" cy="50" rx="6" ry="8"/>
        <ellipse cx="60" cy="50" rx="6" ry="8"/>
        <circle cx="38" cy="48" r="2" fill="#fff"/>
        <circle cx="58" cy="48" r="2" fill="#fff"/>
      `;
    } else {
      eyes.innerHTML = `
        <circle cx="40" cy="50" r="6"/>
        <circle cx="60" cy="50" r="6"/>
      `;
    }
  }

  function setMouth(type) {
    if (type === "o") {
      mouth.setAttribute("d", "");
      mouth.outerHTML = `<ellipse id="mouth" cx="50" cy="66" rx="5" ry="6" fill="#111"/>`;
    } else if (type === "flat") {
      mouth.outerHTML = `<rect id="mouth" x="44" y="64" width="12" height="4" rx="2" fill="#111"/>`;
    } else {
      mouth.outerHTML = `<path id="mouth" d="M38 64 Q50 72 62 64" stroke="#111" stroke-width="3" fill="none" stroke-linecap="round"/>`;
    }
  }

  function toggleBlush() {
    blushGroup.style.display = blushGroup.style.display === "none" ? "block" : "none";
  }

  function updateText(value) {
    stickerText.textContent = value;
  }

  function resetSticker() {
    location.reload();
  }

  function downloadPNG() {
    const svg = document.getElementById("sticker");
    const serializer = new XMLSerializer();
    const svgStr = serializer.serializeToString(svg);

    const canvas = document.createElement("canvas");
    canvas.width = 1024;
    canvas.height = 1024;

    const ctx = canvas.getContext("2d");
    const img = new Image();

    img.onload = () => {
      ctx.drawImage(img, 0, 0, 1024, 1024);
      const link = document.createElement("a");
      link.download = "kawaii-sticker.png";
      link.href = canvas.toDataURL("image/png");
      link.click();
    };

    img.src = "data:image/svg+xml;base64," + btoa(svgStr);
  }
</script>

</body>
</html>
